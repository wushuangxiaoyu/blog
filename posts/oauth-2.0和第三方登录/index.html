<!DOCTYPE html>
<html lang="en-ch">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="木屐帽子">
  
  
  
  <link rel="prev" href="https://wushuangxiaoyu.github.io/blog/posts/hello-world/" />
  <link rel="next" href="https://wushuangxiaoyu.github.io/blog/posts/go_interfaceandreflect/" />
  <link rel="canonical" href="https://wushuangxiaoyu.github.io/blog/posts/oauth-2.0%E5%92%8C%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95/" />
  <link rel="apple-touch-icon" sizes="180x180" href="blog/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="blog/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="blog/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           OAuth 2.0和第三方登录 | 木屐帽子
       
  </title>
  <meta name="title" content="OAuth 2.0和第三方登录 | 木屐帽子">
    
  
  <link rel="stylesheet" href="/blog/font/iconfont.css">
  <link rel="stylesheet" href="/blog/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/wushuangxiaoyu.github.io\/blog\/"
    },
    "articleSection" : "posts",
    "name" : "OAuth 2.0和第三方登录",
    "headline" : "OAuth 2.0和第三方登录",
    "description" : "一. 什么是OAuth2.0 \x26emsp;\x26emsp;OAuth是一种开放标准的授权协议或框架，为应用程序提供 “secure designated access” 的能力，在全世界得到广泛应用。\n\x26emsp;\x26emsp;举个例子，你授权京东可以访问你微信的个人资料等信息，而无需提供京东你的微信密码。这可以最大限度地降低风险：如果京东遭遇破坏，你的微信密码仍然是安全的。\n\x26emsp;\x26emsp;OAuth不共享密码数据，而是使用授权令牌来证明消费者和服务提供商之间的身份。OAuth是一种身份验证协议，允许你代表你批准与另一个应用程序交互的应用程序，而不会泄露你的密码。\n二. OAuth应用场景  第三方登录授权服务（微信，FaceBook等都支持OAuth2.0） 与第三方应用的资源请求或交互 相同公司的不同应用信息共享（uid 相同,openid 不同）  三. OAuth2.0 流程 \x26emsp;\x26emsp;OAuth2.0有多种模式，这里只说明授权码模式，具体可参考OAuth 2.0 Grant Types\n授权码模式 \x26emsp;\x26emsp;授权代码授权类型由Web和移动应用程序使用。它与大多数其他授权类型不同，首先要求应用程序启动浏览器以开始流程。在较高级别，流程包括以下步骤： - 应用程序打开浏览器或拉起应用以将用户发送到OAuth服务器 - 用户看到授权提示并批准应用程序的请求 - 使用查询字符串中的授权代码将用户重定向回应用程序 - 应用程序通过授权代码交换访问令牌\n\x26emsp;\x26emsp;\x26emsp;\x26emsp;四. 应用：第三方登录 基本流程 \x26emsp;\x26emsp;了解了OAuth2.0的流程，第三方登录流程就很简单了，流程图如下所示：\n\x26emsp;\x26emsp;\x26emsp;\x26emsp;遇到的问题 \x26emsp;\x26emsp;在 Facebook 的第三方登录提供的接口中，并没有看到获取code的方法，授权成功后就可以直接获取accessToken了\n\x26emsp;\x26emsp; 在stackoverflow看了一下，不只我一个遇到这个问题：Facebook login via Android SDK: Is it possible to get the “code” token without exchanging it for an access token?\n\x26emsp;\x26emsp;也许是因为fb依赖的自己的sdk，获取code的操作在内部已经自动完成了，这样应该也可以，或者说更安全一些？\n五. 参考文档  微信开放平台 权限参考文档 — Facebook 登录 OAuth 2.",
    "inLanguage" : "en-ch",
    "author" : "木屐帽子",
    "creator" : "木屐帽子",
    "publisher": "木屐帽子",
    "accountablePerson" : "木屐帽子",
    "copyrightHolder" : "木屐帽子",
    "copyrightYear" : "2019",
    "datePublished": "2019-04-18 19:49:29 \x2b0800 CST",
    "dateModified" : "2019-04-18 19:49:29 \x2b0800 CST",
    "url" : "https:\/\/wushuangxiaoyu.github.io\/blog\/posts\/oauth-2.0%E5%92%8C%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95\/",
    "wordCount" : "77",
    "keywords" : [ "后台开发", "木屐帽子"]
}
</script>

  <script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/58a7d499.js","daovoice")</script>
  <script>
    daovoice('init', {
      app_id: "58a7d499",
    });
    daovoice('update');
  </script>
</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://wushuangxiaoyu.github.io/blog/">木屐帽子</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/blog/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/blog/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/blog/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/blog/about/" title="">About</a>
                
                <a class="menu-item" href="/blog/about/" title=""></a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://wushuangxiaoyu.github.io/blog/">木屐帽子</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/blog/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/blog/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/blog/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/blog/about/" title="">About</a>
                
                <a class="menu-item" href="/blog/about/" title=""></a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">OAuth 2.0和第三方登录</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://wushuangxiaoyu.github.io/blog/" rel="author">木屐帽子</a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-04-18 itemprop="datePublished">April 18, 2019</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://wushuangxiaoyu.github.io/blog/categories/%E6%8A%80%E6%9C%AF/"> 技术 </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          

<h2 id="一-什么是oauth2-0">一. 什么是OAuth2.0</h2>

<p>&emsp;&emsp;<a href="https://oauth.net/2/">OAuth</a>是一种开放标准的授权协议或框架，为应用程序提供 “secure designated access” 的能力，在全世界得到广泛应用。</p>

<p>&emsp;&emsp;举个例子，你授权京东可以访问你微信的个人资料等信息，而无需提供京东你的微信密码。这可以最大限度地降低风险：如果京东遭遇破坏，你的微信密码仍然是安全的。</p>

<p>&emsp;&emsp;OAuth不共享密码数据，而是使用授权令牌来证明消费者和服务提供商之间的身份。OAuth是一种身份验证协议，允许你代表你批准与另一个应用程序交互的应用程序，而不会泄露你的密码。</p>

<h2 id="二-oauth应用场景">二. OAuth应用场景</h2>

<ul>
<li>第三方登录授权服务（微信，FaceBook等都支持OAuth2.0）</li>
<li>与第三方应用的资源请求或交互</li>
<li>相同公司的不同应用信息共享（uid 相同,openid 不同）</li>
</ul>

<h2 id="三-oauth2-0-流程">三. OAuth2.0 流程</h2>

<p>&emsp;&emsp;OAuth2.0有多种模式，这里只说明授权码模式，具体可参考<a href="https://oauth.net/2/grant-types/">OAuth 2.0 Grant Types</a></p>

<h3 id="授权码模式">授权码模式</h3>

<p>&emsp;&emsp;授权代码授权类型由Web和移动应用程序使用。它与大多数其他授权类型不同，首先要求应用程序启动浏览器以开始流程。在较高级别，流程包括以下步骤：
- 应用程序打开浏览器或拉起应用以将用户发送到OAuth服务器
- 用户看到授权提示并批准应用程序的请求
- 使用查询字符串中的授权代码将用户重定向回应用程序
- 应用程序通过授权代码交换访问令牌</p>

<p>&emsp;&emsp;&emsp;&emsp;<figure><img src="/images/ring.svg" data-sizes="auto" data-src="/blog/images/blog/oauth/OAuth_oauth_code.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>

<h2 id="四-应用-第三方登录">四. 应用：第三方登录</h2>

<h3 id="基本流程">基本流程</h3>

<p>&emsp;&emsp;了解了OAuth2.0的流程，第三方登录流程就很简单了，流程图如下所示：</p>

<p>&emsp;&emsp;&emsp;&emsp;<figure><img src="/images/ring.svg" data-sizes="auto" data-src="/blog/images/blog/oauth/OAuth_oauth_login2.png" alt="" class="lazyload"><figcaption class="image-caption"></figcaption></figure></p>

<h3 id="遇到的问题">遇到的问题</h3>

<p>&emsp;&emsp;在 Facebook 的第三方登录提供的接口中，并没有看到获取code的方法，授权成功后就可以直接获取accessToken了</p>

<p>&emsp;&emsp; 在stackoverflow看了一下，不只我一个遇到这个问题：<a href="https://stackoverflow.com/questions/25185219/facebook-login-via-android-sdk-is-it-possible-to-get-the-code-token-without-e">Facebook login via Android SDK: Is it possible to get the “code” token without exchanging it for an access token?</a></p>

<p>&emsp;&emsp;也许是因为fb依赖的自己的sdk，获取code的操作在内部已经自动完成了，这样应该也可以，或者说更安全一些？</p>

<h2 id="五-参考文档">五. 参考文档</h2>

<ul>
<li><a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419317851&amp;token=&amp;lang=zh_CN">微信开放平台</a></li>
<li><a href="https://developers.facebook.com/docs/facebook-login/permissions/v2.2?locale=zh_CN">权限参考文档 — Facebook 登录</a></li>
<li><a href="https://oauth.net/2/">OAuth 2.0 — OAuth</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html">理解OAuth 2.0 阮一峰</a></li>
</ul>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>木屐帽子 </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://wushuangxiaoyu.github.io/blog/posts/oauth-2.0%E5%92%8C%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95/>https://wushuangxiaoyu.github.io/blog/posts/oauth-2.0%E5%92%8C%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://wushuangxiaoyu.github.io/blog/tags/%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91/">
                    #后台开发</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://wushuangxiaoyu.github.io/blog/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://wushuangxiaoyu.github.io/blog/posts/hello-world/" class="prev" rel="prev" title="hello-world"><i class="iconfont icon-left"></i>&nbsp;hello-world</a>
         
        
        <a href="https://wushuangxiaoyu.github.io/blog/posts/go_interfaceandreflect/" class="next" rel="next" title="【Go】interface{}和反射">【Go】interface{}和反射&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2018 - 2019</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://wushuangxiaoyu.github.io/blog/">木屐帽子</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/blog/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
